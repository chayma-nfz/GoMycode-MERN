(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t,a){e.exports=a(251)},123:function(e,t,a){},155:function(e,t){},157:function(e,t){},194:function(e,t){},195:function(e,t){},251:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(59),o=a.n(c),l=(a(123),a(3)),s=a(20),i=a(1),m=a(111),u=a.n(m),d=function(e){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/products?sortBy=").concat(e,"&order=desc&limit=6"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},p=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={limit:t,skip:e,filters:a};return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/products/by/search"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},f=function(e){var t=e.item;return r.a.createElement("div",{className:"product-img"},r.a.createElement("img",{src:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/product/photo/").concat(t._id),alt:t.name,className:"m-3"}))},E=a(26),b=a.n(E),N=a(2),h=function(e){var t=e.product,a=e.showViewButton,c=void 0===a||a,o=e.showAddToCartButton,m=void 0===o||o,u=e.cartUpdate,d=void 0!==u&&u,p=e.showRemoveProductButton,E=void 0!==p&&p,h=e.setRender,g=void 0===h?function(e){return e}:h,v=e.render,y=void 0===v?void 0:v,j=Object(n.useState)(1),O=Object(i.a)(j,2),_=O[0],P=O[1],A=Object(n.useState)(!1),C=Object(i.a)(A,2),w=C[0],S=C[1],U=function(){!function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.push(Object(N.a)({},e,{count:1})),a=Array.from(new Set(a.map((function(e){return e._id})))).map((function(e){return a.find((function(t){return t._id===e}))})),localStorage.setItem("cart",JSON.stringify(a)),t())}(t,(function(){S(!0)}))},R=function(e){return function(t){g(!y),P(t.target.value<1?1:t.target.value),t.target.value>=1&&function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.map((function(n,r){return n._id===e&&(a[r].count=t),null})),localStorage.setItem("cart",JSON.stringify(a)))}(e,t.target.value)}};return r.a.createElement("div",{className:"card h-100 text-center"},r.a.createElement("div",{className:"card-header"},t.name),r.a.createElement("div",{className:"card-image"},function(e){if(e)return r.a.createElement(s.a,{to:"/cart"})}(w),r.a.createElement(f,{item:t})),r.a.createElement("div",{className:"column card-body"},r.a.createElement("p",null,t.description.substring(0,50)),r.a.createElement("hr",null),r.a.createElement("h5",null,"$",t.price),r.a.createElement("hr",null),r.a.createElement("p",null,"Category: ",t.category&&t.category.name),r.a.createElement("hr",null),r.a.createElement("p",null,"Added ",b()(t.createdAt).fromNow()),r.a.createElement("div",null,t.quantity>0?r.a.createElement("span",{className:"badge badge-primary badge-pill mb-2"},"In Stock"):r.a.createElement("span",{className:"badge badge-primary badge-pill mb-2"},"Out of Stock")),r.a.createElement("div",null,function(e){return e&&r.a.createElement(l.b,{to:"/product/".concat(t._id),className:"mr-2"},r.a.createElement("button",{className:"btn btn-outline-primary mt-2 mb-2"},"View"))}(c),function(e){return e&&r.a.createElement("button",{className:"btn btn-outline-success mt-2 mb-2",onClick:U},"Add to cart")}(m),function(e){return e&&r.a.createElement("button",{className:"btn btn-outline-danger mt-2 mb-2",onClick:function(){!function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.map((function(t,n){return t._id===e&&a.splice(n,1),null})),localStorage.setItem("cart",JSON.stringify(a)),t())}(t._id,(function(){return S(!0)})),g(!y)}},"Remove")}(E)),function(e){return e&&r.a.createElement("div",{className:"input-group mt-1"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Quantity")),r.a.createElement("input",{type:"number",className:"form-control",value:_,onChange:R(t._id)}))}(d)))},g=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(i.a)(o,2),s=l[0],m=l[1],u=Object(n.useState)(!1),p=Object(i.a)(u,2),f=p[0],E=p[1],b=Object(n.useState)(!0),N=Object(i.a)(b,2),g=N[0],v=N[1];Object(n.useEffect)((function(){d("createdAt").then((function(e){e.error?E(e.error):(v(!1),m(e))})),d("sold").then((function(e){e.error?E(e.error):(v(!1),c(e))}))}),[]);var y=function(){return g&&r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))};return r.a.createElement("div",null,f&&r.a.createElement("h2",null,"Fail to load!"),r.a.createElement("h1",{className:"title pt-3 pb-3"},"New Arrivals"),y(),r.a.createElement("div",{className:"container-fluid row m-0 p-0 card-container"},s.map((function(e,t){return r.a.createElement("div",{className:"col-4 mb-3",key:t},r.a.createElement(h,{product:e}))}))),r.a.createElement("h1",{className:"title pt-3 pb-3"},"Best Sellers"),y(),r.a.createElement("div",{className:"container-fluid row m-0 p-0 card-container"},a.map((function(e,t){return r.a.createElement("div",{className:"col-4 mb-3",key:t},r.a.createElement(h,{product:e}))}))))},v=a(9),y=function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())},j=function(){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/signout"),{method:"GET"}).then((function(e){console.log("signout",e)})).catch((function(e){return console.log(e)}))},O=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},_=function(){var e=Object(n.useState)({name:"",email:"",password:"",confirmPassword:"",error:"",success:!1}),t=Object(i.a)(e,2),a=t[0],c=t[1],o=a.name,s=a.email,m=a.password,u=a.confirmPassword,d=a.success,p=a.error,f=function(e){return function(t){c(Object(N.a)({},a,Object(v.a)({error:!1},e,t.target.value)))}},E=function(e){var t;e.preventDefault(),m!==u?c(Object(N.a)({},a,{error:"Password do not match"})):(c(Object(N.a)({},a,{error:!1})),(t={name:o,email:s,password:m},fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))).then((function(e){e.error?c(Object(N.a)({},a,{error:e.error,success:!1})):c(Object(N.a)({},a,{name:"",email:"",password:"",confirmPassword:"",error:"",success:!0}))})))};return r.a.createElement("div",{className:"container w-50"},r.a.createElement("h1",{className:"title"},"Register"),r.a.createElement("div",{className:"alert alert-info",style:{display:d?"":"none"}},"New account is created. Please ",r.a.createElement(l.b,{to:"/signin"},"Sign In")),r.a.createElement("div",{className:"alert alert-danger",style:{display:p?"":"none"}},p),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:f("name"),type:"text",className:"form-control",value:o})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:f("email"),type:"email",className:"form-control",value:s})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:f("password"),type:"password",className:"form-control",value:m})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Confirm Password"),r.a.createElement("input",{onChange:f("confirmPassword"),type:"password",className:"form-control",value:u})),r.a.createElement("button",{onClick:E,className:"btn btn-primary float-right"},"Submit")))},P=a(114),A=a.n(P),C=function(e){var t=e.informParent,a=void 0===t?function(e){return e}:t,n=function(e){var t;(t={idToken:e.tokenId},fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/google-login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){a(e)})).catch((function(e){}))};return r.a.createElement("div",{className:"pb-3"},r.a.createElement(A.a,{clientId:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_GOOGLE_CLIENT_ID),onSuccess:n,onFailure:n}))},w=a(115),S=a.n(w),U=function(e){var t=e.informParent,a=void 0===t?function(e){return e}:t;return r.a.createElement("div",null,r.a.createElement(S.a,{appId:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FACEBOOK_APP_ID),autoLoad:!1,callback:function(e){var t;(t={userID:e.userID,accessToken:e.accessToken},fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/facebook-login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){a(e)})).catch((function(e){}))}}))},R=function(){var e=Object(n.useState)({email:"",password:"",error:"",loading:!1,redirectToReferrer:!1}),t=Object(i.a)(e,2),a=t[0],c=t[1],o=a.email,m=a.password,u=a.loading,d=a.error,p=a.redirectToReferrer,f=function(e){return function(t){c(Object(N.a)({},a,Object(v.a)({error:!1},e,t.target.value)))}},E=function(e){var t;e.preventDefault(),c(Object(N.a)({},a,{error:!1,loading:!0})),(t={email:o,password:m},fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))).then((function(e){e.error?c(Object(N.a)({},a,{error:e.error,loading:!1})):y(e,(function(){c(Object(N.a)({},a,{redirectToReferrer:!0}))}))}))},b=function(e){y(e,(function(){c(Object(N.a)({},a,{redirectToReferrer:!0}))}))};return r.a.createElement("div",{className:"container w-50"},r.a.createElement("h1",{className:"title"},"Sign In"),u&&r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("div",{className:"alert alert-danger",style:{display:d?"":"none"}},d),r.a.createElement("div",{className:"text-center"},r.a.createElement(C,{informParent:b}),r.a.createElement(U,{informParent:b})),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:f("email"),type:"email",className:"form-control",value:o})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:f("password"),type:"password",className:"form-control",value:m})),r.a.createElement("div",null,r.a.createElement("p",null,"Don't remember your password?",r.a.createElement(l.b,{to:"/auth/password/forgot"},"\xa0Click here!"))),r.a.createElement("button",{onClick:E,className:"btn btn-primary float-right"},"Submit")),function(){if(p)return r.a.createElement(s.a,{to:"/"})}())},I=Object(s.g)((function(e){var t=e.history,a=function(e){return t.location.pathname===e?{color:"#007bff"}:{color:"#fff"}};return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark sticky-top"},r.a.createElement(l.b,{className:"navbar-brand",to:"/about"},"My Store ",r.a.createElement("i",{className:"fa fa-store"})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbar"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbar"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/",className:"nav-link",style:a("/")},r.a.createElement("i",{className:"fa fa-home"}),"\xa0Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/shop",className:"nav-link",style:a("/shop")},"Shop")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/search",className:"nav-link",style:a("/search")},"Search")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/cart",className:"nav-link",style:a("/cart")},r.a.createElement("i",{className:"fa fa-shopping-cart"}),"\xa0",r.a.createElement("sup",null,r.a.createElement("medium",null,"undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0)))),!O()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/register",className:"nav-link",style:a("/register")},"Register")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/signin",className:"nav-link",style:a("/signin")},"Sign In"))),O()&&1===O().user.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/admin/dashboard",className:"nav-link",style:a("/admin/dashboard")},r.a.createElement("i",{className:"fa fa-user-circle"}),"\xa0Admin")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/signin",className:"nav-link",style:a("/signout"),onClick:function(){return j()}},r.a.createElement("i",{className:"fa fa-sign-out-alt"})))),O()&&0===O().user.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/user/dashboard",className:"nav-link",style:a("/user/dashboard")},r.a.createElement("i",{className:"fa fa-user-circle"}),"\xa0",O().user.name)),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/signin",className:"nav-link",style:a("/signout"),onClick:function(){return j()}},r.a.createElement("i",{className:"fa fa-sign-out-alt"})))))))})),L=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=O().user,s=o.name,m=o.email,u=o.role,d=o._id,p=O().token;Object(n.useEffect)((function(){(function(e,t){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/orders/by/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(d,p).then((function(e){e.error?console.log(e.error):c(e)}))}),[]);return r.a.createElement("div",{className:"row p-5 card-container"},r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"card "},r.a.createElement("h4",{className:"card-header"},"User Links"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/cart"},"My Cart")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/profile/".concat(d)},"Update Profile"))))),r.a.createElement("div",{className:"col-8"},r.a.createElement("div",{className:"card mb-5 card-dashboard"},r.a.createElement("h3",{className:"card-header"},"User Information"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},"Name:\xa0",s),r.a.createElement("li",{className:"list-group-item"},"Email:\xa0",m),r.a.createElement("li",{className:"list-group-item"},"Role:\xa0",1===u?"Admin":"Registered User"))),function(e){return r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"Purchase history"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},e.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement("h3",null,"Total Products:\xa0",e.products.length),r.a.createElement("hr",null),e.products.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement("h6",null,"Name: ",e.name),r.a.createElement("h6",null,"Price: $",e.price),r.a.createElement("h6",null,"Purchase Date: ",b()(e.createdAt).fromNow()),r.a.createElement("hr",null))})))})))))}(a)))},k=function(){return r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement("h4",{className:"pt-4 pb-3 text-center"},"MongoDB Express React Node"),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("h3",null,"App features:"),r.a.createElement("ul",{className:"ml-5"},r.a.createElement("li",null,"Login/Signup system"),r.a.createElement("li",null,"Forgot/Reset password via email"),r.a.createElement("li",null,"User/Admin dashboard"),r.a.createElement("li",null,"CRUD products, categories"),r.a.createElement("li",null,"Products filtered by search, category and price"),r.a.createElement("li",null,"Product page with related products"),r.a.createElement("li",null,"Shopping cart"),r.a.createElement("li",null,"Payment with PayPal"),r.a.createElement("li",null,"Order notification"))),r.a.createElement("footer",{className:"bg-dark p-2 fixed-bottom"},r.a.createElement("div",{className:"container-fluid text-white"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("p",{className:"mb-0 "},"Copyright \xa9 2020 All Rights Reserved by Khoa Do")),r.a.createElement("div",{className:"col-6 d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"mr-3"},r.a.createElement("i",{className:"fab fa-facebook "})),r.a.createElement("div",{className:"mr-3"},r.a.createElement("i",{className:"fab fa-linkedin"})),r.a.createElement("div",{className:"mr-3"},r.a.createElement("i",{className:"fab fa-dribbble"})),r.a.createElement("div",{className:"mr-3"},r.a.createElement("i",{className:"fab fa-instagram"})))))))},T=a(33),x=function(){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},D=[{_id:0,name:"Any",array:[]},{_id:1,name:"$0-9",array:[0,9]},{_id:2,name:"$10-19",array:[10,19]},{_id:3,name:"$20-29",array:[20,29]},{_id:4,name:"$30-39",array:[30,39]},{_id:5,name:"$40+",array:[40,1e3]}],B=function(e){var t=e.categories,a=e.handleFilters,c=Object(n.useState)([]),o=Object(i.a)(c,2),l=o[0],s=o[1];return t.map((function(e){return r.a.createElement("li",{className:"list-unstyled ml-4",key:e._id},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{type:"checkbox",className:"form-check-input ",onChange:(t=e._id,function(){var e=l.indexOf(t),n=Object(T.a)(l);-1===e?n.push(t):n.splice(e,1),s(n),a(n)})}),r.a.createElement("label",{className:"form-check-label font-weight-bold"},e.name)));var t}))},V=function(e){var t=e.prices,a=e.handleFilters,c=Object(n.useState)(0),o=Object(i.a)(c,2),l=(o[0],o[1]),s=function(e){a(e.target.value),l(e.target.value)};return t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("input",{onChange:s,value:"".concat(e._id),name:e,type:"radio",className:"ml-4"}),r.a.createElement("label",{className:"form-check-label font-weight-bold"},e.name))}))},J=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({filters:{category:[],price:[]}}),l=Object(i.a)(o,2),s=l[0],m=l[1],u=Object(n.useState)(!1),d=Object(i.a)(u,1)[0],f=Object(n.useState)(6),E=Object(i.a)(f,1)[0],b=Object(n.useState)(0),g=Object(i.a)(b,2),v=g[0],y=g[1],j=Object(n.useState)([]),O=Object(i.a)(j,2),_=O[0],P=O[1],A=Object(n.useState)(0),C=Object(i.a)(A,2),w=C[0],S=C[1];Object(n.useEffect)((function(){x().then((function(e){e.error?d(e.error):c(e)})),p(v,E,s.filters).then((function(e){e.error?d(e.error):(P(e.data),S(e.size),y(0))}))}),[s]);var U=function(){var e=v+E;p(e,E,s.filters).then((function(t){t.error?d(t.error):(P([].concat(Object(T.a)(_),Object(T.a)(t.data))),S(t.size),y(e))}))};return r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"m-3"},r.a.createElement("h1",{className:"title"},"Filter By ")),r.a.createElement("div",{className:"container-fluid ml-0 row mark d-flex justify-content-center align-content-center"},r.a.createElement(B,{categories:a,handleFilters:function(e){return function(e){var t=Object(N.a)({},s);t.filters.category=e,m(t)}(e)}})),r.a.createElement("div",{className:"container-fluid ml-0 row  mark d-flex justify-content-center align-content-center"},r.a.createElement(V,{prices:D,handleFilters:function(e){return function(e){var t=[];for(var a in D)D[a]._id===parseInt(e)&&(t=D[a].array);var n=Object(N.a)({},s);s.filters.price=t,m(n)}(e)}})),r.a.createElement("div",{className:"row m-3 card-container"},_.map((function(e,t){return r.a.createElement("div",{className:"col-4 mb-3",key:t},r.a.createElement(h,{product:e}))}))),w>0&&w>=E&&r.a.createElement("button",{onClick:U,className:"btn btn-primary mb-5"},"Load more"))},F=function(){var e=Object(n.useState)({categories:[],category:"",search:"",results:[],searched:!1}),t=Object(i.a)(e,2),a=t[0],c=t[1],o=a.categories,l=a.category,s=a.search,m=a.results,d=a.searched;Object(n.useEffect)((function(){x().then((function(e){e.error?console.log(e.error):c(Object(N.a)({},e,{categories:e}))}))}),[]);var p=function(e){return function(t){c(Object(N.a)({},a,Object(v.a)({},e,t.target.value)))}},f=function(e,t){return e&&t.length>0?"Found ".concat(t.length," products."):e&&t.length<1?"No product found!":void 0};return r.a.createElement("div",{className:"m-3"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log("search:".concat(s),"category:".concat(l)),s&&function(e){var t=u.a.stringify(e);return console.log("query",t),fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/products/search?").concat(t),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({search:s||void 0,category:l}).then((function(e){e.error?console.log(e.error):c(Object(N.a)({},a,{results:e,searched:!0}))}))}},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("select",{className:"btn mr-2",onChange:p("category")},r.a.createElement("option",{value:"All"},"All"),o.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("input",{type:"search",className:"form-control",onChange:p("search"),placeholder:"Enter name"})),r.a.createElement("div",{className:"btn input-group-append",style:{border:"none"}},r.a.createElement("button",{className:"btn btn-primary"},"Search")))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.a.createElement("div",{className:"mt-3 text-center"},r.a.createElement("h2",{className:"mt-3 mb-3"},f(d,e)),r.a.createElement("div",{className:"row card-container"},e.map((function(e,t){return r.a.createElement("div",{className:"col-4 mb-3",key:t},r.a.createElement(h,{product:e}))}))))}(m))},z=function(e){var t=e.match,a=Object(n.useState)({}),c=Object(i.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)([]),m=Object(i.a)(s,2),u=m[0],d=m[1],p=Object(n.useState)(!1).setError;Object(n.useEffect)((function(){(function(e){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(t.params.productId).then((function(e){e.error?p(e.error):(l(e),function(e){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/products/related/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e._id).then((function(e){e.error?p(e.error):d(e)})))}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"m-2 d-flex justify-content-center"},r.a.createElement("div",{className:"col-6"},o&&o.description&&r.a.createElement(h,{product:o,showViewButton:!1}))),r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",{className:"title p-3"},"Related Products"),0===u.length&&r.a.createElement("h4",null,"No related products found."),r.a.createElement("div",{className:"row m-2"},u.map((function(e){return r.a.createElement("div",{className:"col-4",key:e._id},r.a.createElement(h,{product:e}))})))))},q=a(116),G=a.n(q),M=function(e){var t=e.products,a=e.setRender,c=void 0===a?function(e){return e}:a,o=e.render,s=void 0===o?void 0:o,m=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},address:""}),u=Object(i.a)(m,2),d=u[0],p=u[1],f=O()&&O().user._id,E=O()&&O().token,b=function(e,t){(function(e,t){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/braintree/getToken/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?p(Object(N.a)({},e,{error:e.error})):p({clientToken:e.clientToken})}))};Object(n.useEffect)((function(){b(f,E)}),[]);var h,g,v=function(){return t.reduce((function(e,t){return Math.round(e+t.count*t.price)}),0)},y=function(){p({loading:!0});d.instance.requestPaymentMethod().then((function(e){var a={paymentMethodNonce:e.nonce,amount:v()};(function(e,t,a){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/braintree/payment/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(f,E,a).then((function(e){p(Object(N.a)({},d,{success:e.success}));var a,n={products:t,transaction_id:e.transaction.id,amount:e.transaction.amount,address:d.address};!function(e,t,a){fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(f,E,n),a=function(){c(!s),console.log("payment success and empty cart"),p({loading:!1,success:!0})},"undefined"!==typeof window&&(localStorage.removeItem("cart"),a())})).catch((function(e){console.log(e),p({loading:!1})}))})).catch((function(e){p(Object(N.a)({},d,{error:e.message}))}))},j=function(e){p(Object(N.a)({},d,{address:e.target.value}))},_=function(){return r.a.createElement("div",{onBlur:function(){return p(Object(N.a)({},d,{error:""}))},className:"w-50 m-auto"},null!==d.clientToken&&t.length>0?r.a.createElement("div",null,r.a.createElement("div",{className:"form-group mb-3"},r.a.createElement("label",{className:"text-muted"},"Delivery Address:"),r.a.createElement("textarea",{className:"form-control",placeholder:"Enter here",value:d.address,onChange:j})),r.a.createElement(G.a,{options:{authorization:d.clientToken,paypal:{flow:"vault"}},onInstance:function(e){return d.instance=e}}),r.a.createElement("button",{onClick:y,className:"btn btn-success btn-block pt-2"},"Pay")):null)};return r.a.createElement("div",{className:"container-fluid "},r.a.createElement("h2",null,"Total: $",v()),d.loading&&r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),(g=d.success,r.a.createElement("div",{className:"alert alert-info",style:{display:g?"":"none"}},"Thanks! Your payment was successful!")),(h=d.error,r.a.createElement("div",{className:"alert alert-danger",style:{display:h?"":"none"}},h)),O()?r.a.createElement("div",null,_()):r.a.createElement(l.b,{to:"/signin"},r.a.createElement("button",{className:"btn btn-primary"},"Sign in here")))},$=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),m=s[0],u=s[1];Object(n.useEffect)((function(){c("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[m]);return r.a.createElement("div",{className:"text-center m-3"},r.a.createElement("div",{className:""},r.a.createElement("h1",{className:"title p-2"},"Your cart"),r.a.createElement(M,{products:a,setRender:u,render:m})),r.a.createElement("div",{className:"mt-4"},a.length>0?function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},e.map((function(e){return r.a.createElement("div",{className:"col-4",key:e._id},r.a.createElement(h,{product:e,showAddToCartButton:!1,showRemoveProductButton:!0,cartUpdate:!0,setRender:u,render:m}))}))," "))}(a):r.a.createElement("div",null,r.a.createElement("h2",null,"Your cart is currently empty."),r.a.createElement(l.b,{to:"/shop"},"Continue shopping"))))},Y=a(41),Q=function(e){var t=e.component,a=Object(Y.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return O()?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},K=function(e){var t=e.match,a=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),c=Object(i.a)(a,2),o=c[0],l=c[1],s=o.name,m=o.email,u=o.password,d=o.error,p=o.success,f=O().token;Object(n.useEffect)((function(){(function(e,t){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})(t.params.userId,f).then((function(e){e.error?l(Object(N.a)({},o,{error:!0})):l(Object(N.a)({},o,{name:e.name,email:e.email}))}))}),[]);var E=function(e){return function(t){l(Object(N.a)({},o,Object(v.a)({error:!1},e,t.target.value)))}},b=function(e){e.preventDefault(),function(e,t,a){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/user/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(t.params.userId,f,{name:s,email:m,password:u}).then((function(e){e.error?alert(e.error):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var a=JSON.parse(localStorage.getItem("jwt"));a.user=e,localStorage.setItem("user",JSON.stringify(a)),t()}}(e,(function(){l(Object(N.a)({},o,{name:e.name,email:e.email,success:!0}))}))}))};return r.a.createElement("div",{className:"container w-50"},r.a.createElement("h1",{className:"title m-3 text-center"},"Profile update"),function(e){return r.a.createElement("div",{className:"alert alert-info",style:{display:e?"":"none"}},"Your profile has been updated successfully!")}(p),function(e){return r.a.createElement("div",{className:"alert alert-danger",style:{display:e?"":"none"}},"Fail to update your profile")}(d),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:E("name"),value:s,type:"text",className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{defaultValue:m,type:"email",className:"form-control",disabled:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:E("password"),value:u,type:"password",className:"form-control"})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary float-right",onClick:b},"Update"))))},W=function(e){var t=e.component,a=Object(Y.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return O()&&1===O().user.role?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/",state:{from:e.location}}})}}))},H=function(){var e=O().user,t=e.name,a=e.email,n=e.role,c=e._id;return r.a.createElement("div",{className:"row p-5 card-container"},r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"Admin Links"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/profile/".concat(c)},"Update Profile")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/create/category"},"Create Category")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/create/product"},"Create Product")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/admin/categories"},"Manage Categories")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/admin/products"},"Manage Products")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/admin/orders"},"View Orders"))))),r.a.createElement("div",{className:"col-8"},r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"Profile"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},"Name:\xa0",t),r.a.createElement("li",{className:"list-group-item"},"Email:\xa0",a),r.a.createElement("li",{className:"list-group-item"},"Role:\xa0",1===n?"Admin":"Registered User")))))},X=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),f=p[0],E=p[1],b=O(),N=b.user,h=b.token,g=function(e){u(""),c(e.target.value)},v=function(e){e.preventDefault(),u(""),E(!1),function(e,t,a){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(N._id,h,{name:a}).then((function(e){e.error?u(e.error):(u(""),E(!0))}))};return r.a.createElement("div",{className:"container w-50"},r.a.createElement("h1",{className:"title m-3 text-center"},"New Category"),function(){if(m)return r.a.createElement("h3",{className:"text-danger"},m)}(),function(){if(f)return r.a.createElement("h3",{className:"text-success"},a," is created successfully!")}(),r.a.createElement("form",{onSubmit:v},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"",className:"text-muted"},"Category Name"),r.a.createElement("input",{type:"text",className:"form-control",autoFocus:!0,value:a,onChange:g,required:!0})),r.a.createElement(l.b,{to:"/admin/dashboard",className:"btn btn-outline-warning float-left"},"Back"),r.a.createElement("button",{className:"btn btn-outline-primary float-right"},"Create")))},Z=function(){var e=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",createdProduct:"",formData:""}),t=Object(i.a)(e,2),a=t[0],c=t[1],o=O(),s=o.user,m=o.token,u=a.name,d=a.description,p=a.price,f=a.categories,E=a.quantity,b=a.loading,h=a.error,g=a.createdProduct,y=a.formData;Object(n.useEffect)((function(){x().then((function(e){e.error?c(Object(N.a)({},a,{error:e.error})):c(Object(N.a)({},a,{categories:e,formData:new FormData}))}))}),[]);var j=function(e){return function(t){var n="photo"===e?t.target.files[0]:t.target.value;y.set(e,n),c(Object(N.a)({},a,Object(v.a)({},e,n)))}},_=function(e){e.preventDefault(),c(Object(N.a)({},a,{error:"",loading:!0})),function(e,t,a){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(s._id,m,y).then((function(e){e.error?c(Object(N.a)({},a,{error:e.error})):c(Object(N.a)({},a,{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,createdProduct:e.name}))}))};return r.a.createElement("div",{className:"container w-50"},r.a.createElement("h1",{className:"title p-2 text-center"},"New Product"),b&&r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("div",{className:"alert alert-info",style:{display:g?"":"none"}},r.a.createElement("h2",null,"".concat(g)," is created!")),r.a.createElement("div",{className:"alert alert-danger",style:{display:h?"":"none"}},h),r.a.createElement("form",{className:"mb-3",onSubmit:_},r.a.createElement("h4",null,"Post Photo"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"btn btn-secondary"},r.a.createElement("input",{onChange:j("photo"),type:"file",name:"photo",accept:"image/*"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:j("name"),type:"text",className:"form-control",value:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Description"),r.a.createElement("textarea",{onChange:j("description"),className:"form-control",value:d})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Price"),r.a.createElement("input",{onChange:j("price"),type:"number",className:"form-control",value:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Category"),r.a.createElement("select",{onChange:j("category"),className:"form-control"},r.a.createElement("option",null,"Please select"),f&&f.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Shipping"),r.a.createElement("select",{onChange:j("shipping"),className:"form-control"},r.a.createElement("option",null,"Please select"),r.a.createElement("option",{value:"0"},"No"),r.a.createElement("option",{value:"1"},"Yes"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Quantity"),r.a.createElement("input",{onChange:j("quantity"),type:"number",className:"form-control",value:E})),r.a.createElement(l.b,{to:"/admin/dashboard",className:"btn btn-outline-warning float-left"},"Back"),r.a.createElement("button",{className:"btn btn-outline-primary float-right mb-3"},"Create")))},ee=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(i.a)(o,2),s=l[0],m=l[1],u=O(),d=u.user,p=u.token,f=function(){(function(e,t){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/order/list/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(d._id,p).then((function(e){e.error?console.log(e.error):c(e)}))};Object(n.useEffect)((function(){f(),function(e,t){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/order/status-values/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(d._id,p).then((function(e){e.error?console.log(e.error):m(e)}))}),[]);var E=function(e,t){return r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},e)),r.a.createElement("input",{type:"text",value:t,className:"form-control",readOnly:!0}))},N=function(e,t){(function(e,t,a,n){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/order/").concat(a,"/status/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({status:n,orderId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(d._id,p,t,e.target.value).then((function(e){e.error?console.log("Status update failed"):f()}))};return r.a.createElement("div",null,r.a.createElement("h1",{className:"text-center mt-2 title"},"Total orders: ",a.length),a.map((function(e){return r.a.createElement("div",{className:"row m-2",key:e._id},r.a.createElement("div",{className:"col-6"},r.a.createElement("h4",{className:"mb-3 text-primary"},r.a.createElement("span",{className:""},"Order ID: ",e._id)),r.a.createElement("ul",{className:"list-group mb-2"},r.a.createElement("li",{className:"list-group-item text-danger"},(t=e,r.a.createElement("div",{className:"form-group"},r.a.createElement("h4",{className:"mark mb-2"},"Status: ",t.status),r.a.createElement("select",{className:"form-control",onChange:function(e){return N(e,t._id)}},r.a.createElement("option",null,"Update Status"),s.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))))),r.a.createElement("li",{className:"list-group-item"},"Transaction ID: ",e.transaction_id),r.a.createElement("li",{className:"list-group-item"},"Amount: $",e.amount),r.a.createElement("li",{className:"list-group-item"},"Ordered by: ",e.user.name),r.a.createElement("li",{className:"list-group-item"},"Ordered on: ",b()(e.createdAt).fromNow()),r.a.createElement("li",{className:"list-group-item"},"Delivery address: ",e.address))),r.a.createElement("div",{className:"col-6 m-auto"},r.a.createElement("h3",{className:"mt-4 mb-4 font-italic"},"Total products in the order: ",e.products.length),e.products.map((function(e){return r.a.createElement("div",{key:e._id},E("Name",e.name),E("Price","$".concat(e.price)),E("Count",e.count),E("ID",e._id))}))),r.a.createElement("hr",{style:{borderBottom:"3px solid indigo",width:"50%"}}));var t})))},te=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=O(),s=o.user,m=o.token,u=function(){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/products?limit=undefined"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):c(e)}))};Object(n.useEffect)((function(){u()}),[]);var d=function(e){(function(e,t,a){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/product/").concat(e,"/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,s._id,m).then((function(e){e.error?console.log(e.error):u()}))};return r.a.createElement("div",{className:"container w-50"},r.a.createElement("h1",{className:"title m-3 text-center"},"Manage Products"),r.a.createElement("h2",null,"Total products: ",a.length),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("ul",{className:"list-group"},a.map((function(e){return r.a.createElement("li",{className:"list-group-item",key:e._id},r.a.createElement("strong",{className:"float-left"},e.name),r.a.createElement("div",{className:"float-right"},r.a.createElement(l.b,{to:"/admin/product/update/".concat(e._id)},r.a.createElement("span",{className:"badge badge-warning badge-pill m-2"},"Update")),r.a.createElement(l.b,{to:"/admin/products"},r.a.createElement("span",{className:"badge badge-danger badge-pill",onClick:function(){return d(e._id)}},"Delete"))))}))))))},ae=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=O(),s=o.user,m=o.token,u=function(){return x().then((function(e){e.error?console.log(e.error):c(e)}))};Object(n.useEffect)((function(){u()}),[]);var d=function(e){(function(e,t,a){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/category/").concat(a,"/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(s._id,m,e).then((function(e){e.error?console.log(e.error):u()}))};return r.a.createElement("div",{className:"container w-50"},r.a.createElement("h1",{className:"title m-3 text-center"},"Manage Categories"),r.a.createElement("h2",null,"Total categories: ",a.length),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("ul",{className:"list-group"},a.map((function(e){return r.a.createElement("li",{className:"list-group-item",key:e._id},r.a.createElement("strong",{className:"float-left"},e.name),r.a.createElement("div",{className:"float-right"},r.a.createElement(l.b,{to:"/admin/category/update/".concat(e._id)},r.a.createElement("span",{className:"badge badge-warning badge-pill m-2"},"Update")),r.a.createElement(l.b,{to:"/admin/categories"},r.a.createElement("span",{className:"badge badge-danger badge-pill",onClick:function(){return d(e._id)}},"Delete"))))}))))))},ne=function(e){var t=e.match,a=Object(n.useState)(""),c=Object(i.a)(a,2),o=c[0],s=c[1],m=Object(n.useState)(!1),u=Object(i.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(!1),E=Object(i.a)(f,2),b=E[0],N=E[1],h=O(),g=h.user,v=h.token;Object(n.useEffect)((function(){var e;(e=t.params.categoryId,fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/category/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e.error?(console.log(e.error),p(!0)):s(e.name)}))}),[]);var y=function(e){p(""),s(e.target.value)},j=function(e){e.preventDefault(),p(""),N(!1),function(e,t,a,n){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/category/").concat(a,"/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(g._id,v,t.params.categoryId,{name:o}).then((function(e){e.error?p(e.error):(p(""),N(!0))}))};return r.a.createElement("div",{className:"container w-50"},r.a.createElement("h1",{className:"title m-3 text-center"},"Update Category"),function(){if(d)return r.a.createElement("h3",{className:"text-danger"},d)}(),function(){if(b)return r.a.createElement("h3",{className:"text-success"},o," is updated successfully!")}(),r.a.createElement("form",{onSubmit:j},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"",className:"text-muted"},"Category Name"),r.a.createElement("input",{type:"text",className:"form-control",autoFocus:!0,value:o,onChange:y,required:!0})),r.a.createElement(l.b,{to:"/admin/dashboard",className:"btn btn-outline-warning float-left"},"Back"),r.a.createElement("button",{className:"btn btn-outline-primary float-right"},"Update")))},re=function(e){var t=e.match,a=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",updatedProduct:"",formData:""}),c=Object(i.a)(a,2),o=c[0],s=c[1],m=O(),u=m.user,d=m.token,p=o.name,f=o.description,E=o.price,b=o.categories,h=o.quantity,g=o.loading,y=o.error,j=o.updatedProduct,_=o.formData,P=function(e){(function(e){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?s(Object(N.a)({},o,{error:e.error})):(s(Object(N.a)({},o,{name:e.name,description:e.description,price:e.price,category:e.category._id,shipping:e.shipping,quantity:e.quantity,formData:new FormData})),A())}))},A=function(){x().then((function(e){e.error?s(Object(N.a)({},o,{error:e.error})):s({categories:e,formData:new FormData})}))};Object(n.useEffect)((function(){P(t.params.productId)}),[]);var C=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;_.set(e,a),s(Object(N.a)({},o,Object(v.a)({},e,a)))}},w=function(e){e.preventDefault(),s(Object(N.a)({},o,{error:"",loading:!0})),function(e,t,a,n){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/product/").concat(a,"/").concat(e),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(u._id,d,t.params.productId,_).then((function(e){e.error?s(Object(N.a)({},o,{error:e.error})):s(Object(N.a)({},o,{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,updatedProduct:e.name}))}))};return r.a.createElement("div",{className:"container w-50"},r.a.createElement("h1",{className:"title p-2 text-center"},"Update Product"),g&&r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("div",{className:"alert alert-info",style:{display:j?"":"none"}},r.a.createElement("h2",null,"".concat(j)," is updated successfully!")),r.a.createElement("div",{className:"alert alert-danger",style:{display:y?"":"none"}},y),r.a.createElement("form",{className:"mb-3",onSubmit:w},r.a.createElement("h4",null,"Post Photo"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"btn btn-secondary"},r.a.createElement("input",{onChange:C("photo"),type:"file",name:"photo",accept:"image/*"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:C("name"),type:"text",className:"form-control",value:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Description"),r.a.createElement("textarea",{onChange:C("description"),className:"form-control",value:f})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Price"),r.a.createElement("input",{onChange:C("price"),type:"number",className:"form-control",value:E})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Category"),r.a.createElement("select",{onChange:C("category"),className:"form-control"},r.a.createElement("option",null,"Please select"),b&&b.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Shipping"),r.a.createElement("select",{onChange:C("shipping"),className:"form-control"},r.a.createElement("option",null,"Please select"),r.a.createElement("option",{value:"0"},"No"),r.a.createElement("option",{value:"1"},"Yes"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Quantity"),r.a.createElement("input",{onChange:C("quantity"),type:"number",className:"form-control",value:h})),r.a.createElement(l.b,{to:"/admin/products",className:"btn btn-outline-warning float-left"},"Back"),r.a.createElement("button",{className:"btn btn-outline-primary float-right mb-3"},"Update")))},ce=function(){var e=Object(n.useState)({email:"",error:"",success:!1}),t=Object(i.a)(e,2),a=t[0],c=t[1],o=a.email,l=a.error,s=a.success,m=function(e){c(Object(N.a)({},a,Object(v.a)({},e.target.name,e.target.value)))},u=function(e){e.preventDefault(),c(Object(N.a)({},a,{error:!1})),function(e){return fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/forgot-password"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({email:o}).then((function(e){e.error?c(Object(N.a)({},a,{error:e.error})):c(Object(N.a)({},a,{error:!1,success:!0}))}))};return r.a.createElement("div",{className:"container w-50"},r.a.createElement("h1",{className:"title pt-3 pb-3"},"Forgot Password"),r.a.createElement("div",{className:"alert alert-danger",style:{display:l?"":"none"}},l),r.a.createElement("div",{className:"alert alert-info",style:{display:s?"":"none"}},"We sent a reset password link to your email!"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:m,name:"email",value:o,type:"email",placeholder:"Email",className:"form-control"})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary float-right",onClick:u},"Submit"))))},oe=a(117),le=a.n(oe),se=function(e){var t=e.match,a=Object(n.useState)({name:"",token:"",newPassword:"",error:"",success:!1}),c=Object(i.a)(a,2),o=c[0],l=c[1];Object(n.useEffect)((function(){var e=t.params.token,a=le.a.decode(e).name;e&&l(Object(N.a)({},o,{name:a,token:e}))}),[]);var s=o.name,m=o.token,u=o.newPassword,d=o.error,p=o.success,f=function(e){l(Object(N.a)({},o,{newPassword:e.target.value}))},E=function(e){var t;e.preventDefault(),l(Object(N.a)({},o,{error:!1})),(t={newPassword:u,resetPasswordLink:m},fetch("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,"/reset-password"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e.error?l(Object(N.a)({},o,{error:e.error})):l({newPassword:"",error:!1,success:!0})}))};return r.a.createElement("div",{className:"container w-50"},r.a.createElement("div",{className:"p-3 text-center"},r.a.createElement("h1",{className:"title"},"Welcome back! ",s)),r.a.createElement("div",{className:"alert alert-danger",style:{display:d?"":"none"}},d),r.a.createElement("div",{className:"alert alert-info",style:{display:p?"":"none"}},"Your password has been updated!"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"New Password"),r.a.createElement("input",{onChange:f,name:"password",value:u,type:"password",className:"form-control",required:!0})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary float-right",onClick:E},"Submit"))))},ie=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null,r.a.createElement(I,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:g}),r.a.createElement(s.b,{exact:!0,path:"/register",component:_}),r.a.createElement(s.b,{exact:!0,path:"/signin",component:R}),r.a.createElement(s.b,{exact:!0,path:"/shop",component:J}),r.a.createElement(s.b,{exact:!0,path:"/about",component:k}),r.a.createElement(s.b,{exact:!0,path:"/search",component:F}),r.a.createElement(s.b,{exact:!0,path:"/product/:productId",component:z}),r.a.createElement(s.b,{exact:!0,path:"/cart",component:$}),r.a.createElement(s.b,{exact:!0,path:"/auth/password/forgot",component:ce}),r.a.createElement(s.b,{exact:!0,path:"/auth/password/reset/:token",component:se}),r.a.createElement(Q,{exact:!0,path:"/user/dashboard",component:L}),r.a.createElement(Q,{exact:!0,path:"/profile/:userId",component:K}),r.a.createElement(W,{exact:!0,path:"/admin/dashboard",component:H}),r.a.createElement(W,{exact:!0,path:"/create/category",component:X}),r.a.createElement(W,{exact:!0,path:"/create/product",component:Z}),r.a.createElement(W,{exact:!0,path:"/admin/orders",component:ee}),r.a.createElement(W,{exact:!0,path:"/admin/products",component:te}),r.a.createElement(W,{exact:!0,path:"/admin/product/update/:productId",component:re}),r.a.createElement(W,{exact:!0,path:"/admin/categories",component:ae}),r.a.createElement(W,{exact:!0,path:"/admin/category/update/:categoryId",component:ne}))))};o.a.render(r.a.createElement(ie,null),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.4dac9517.chunk.js.map