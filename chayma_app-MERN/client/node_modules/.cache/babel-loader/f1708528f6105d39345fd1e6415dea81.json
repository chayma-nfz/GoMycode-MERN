{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{updateCategory,getCategory}from'../../helpers/adminFetch';import{isAuthenticated}from'../../helpers/authFetch';var UpdateCategory=function UpdateCategory(_ref){var match=_ref.match;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;useEffect(function(){getCategory(match.params.categoryId).then(function(data){if(data.error){console.log(data.error);setError(true);}else{setName(data.name);}});// eslint-disable-next-line\n},[]);var handleChange=function handleChange(e){setError('');setName(e.target.value);};var clickSubmit=function clickSubmit(e){e.preventDefault();setError('');setSuccess(false);//request an API call\nupdateCategory(user._id,token,match.params.categoryId,{name:name}).then(function(data){if(data.error){setError(data.error);}else{setError('');setSuccess(true);}});};var newCategoryForm=function newCategoryForm(){return React.createElement(\"form\",{onSubmit:clickSubmit},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"\",className:\"text-muted\"},\"Category Name\"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",autoFocus:true,value:name,onChange:handleChange,required:true})),React.createElement(Link,{to:\"/admin/dashboard\",className:\"btn btn-outline-warning float-left\"},\"Back\"),React.createElement(\"button\",{className:\"btn btn-outline-primary float-right\"},\"Update\"));};var showSuccess=function showSuccess(){if(success)return React.createElement(\"h3\",{className:\"text-success\"},name,\" is updated successfully!\");};var showError=function showError(){if(error)return React.createElement(\"h3\",{className:\"text-danger\"},error);};return React.createElement(\"div\",{className:\"container w-50\"},React.createElement(\"h1\",{className:\"title m-3 text-center\"},\"Update Category\"),showError(),showSuccess(),newCategoryForm());};export default UpdateCategory;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Nouveau dossier (2)/ECommerce-MERN/client/src/components/AdminDashboard/UpdateCategory.js"],"names":["React","useState","useEffect","Link","updateCategory","getCategory","isAuthenticated","UpdateCategory","match","name","setName","error","setError","success","setSuccess","user","token","params","categoryId","then","data","console","log","handleChange","e","target","value","clickSubmit","preventDefault","_id","newCategoryForm","showSuccess","showError"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { updateCategory, getCategory } from '../../helpers/adminFetch';\nimport { isAuthenticated } from '../../helpers/authFetch';\n\nconst UpdateCategory = ({ match }) => {\n  const [name, setName] = useState('');\n  const [error, setError] = useState(false);\n  const [success, setSuccess] = useState(false);\n\n  const { user, token } = isAuthenticated();\n\n  useEffect(() => {\n    getCategory(match.params.categoryId).then(data => {\n      if (data.error) {\n        console.log(data.error);\n        setError(true);\n      } else {\n        setName(data.name);\n      }\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  const handleChange = e => {\n    setError('');\n    setName(e.target.value);\n  };\n\n  const clickSubmit = e => {\n    e.preventDefault();\n    setError('');\n    setSuccess(false);\n    //request an API call\n    updateCategory(user._id, token, match.params.categoryId, { name }).then(\n      data => {\n        if (data.error) {\n          setError(data.error);\n        } else {\n          setError('');\n          setSuccess(true);\n        }\n      }\n    );\n  };\n\n  const newCategoryForm = () => (\n    <form onSubmit={clickSubmit}>\n      <div className=\"form-group\">\n        <label htmlFor=\"\" className=\"text-muted\">\n          Category Name\n        </label>\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          autoFocus\n          value={name}\n          onChange={handleChange}\n          required\n        />\n      </div>\n      <Link\n        to=\"/admin/dashboard\"\n        className=\"btn btn-outline-warning float-left\"\n      >\n        Back\n      </Link>\n      <button className=\"btn btn-outline-primary float-right\">Update</button>\n    </form>\n  );\n\n  const showSuccess = () => {\n    if (success)\n      return <h3 className=\"text-success\">{name} is updated successfully!</h3>;\n  };\n\n  const showError = () => {\n    if (error) return <h3 className=\"text-danger\">{error}</h3>;\n  };\n\n  return (\n    <div className=\"container w-50\">\n      <h1 className=\"title m-3 text-center\">Update Category</h1>\n      {showError()}\n      {showSuccess()}\n      {newCategoryForm()}\n    </div>\n  );\n};\n\nexport default UpdateCategory;\n"]},"metadata":{},"sourceType":"module"}