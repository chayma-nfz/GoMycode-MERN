{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{isAuthenticated}from'../../helpers/authFetch';import{getUser,updateUser,updateUserLocalStorage}from'../../helpers/user';var Profile=function Profile(_ref){var match=_ref.match;var _useState=useState({name:'',email:'',password:'',error:'',success:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var name=values.name,email=values.email,password=values.password,error=values.error,success=values.success;var _isAuthenticated=isAuthenticated(),token=_isAuthenticated.token;useEffect(function(){getUser(match.params.userId,token).then(function(data){if(data.error){setValues(_objectSpread({},values,{error:true}));}else{setValues(_objectSpread({},values,{name:data.name,email:data.email}));}});// eslint-disable-next-line\n},[]);var handleChange=function handleChange(name){return function(event){// console.log(event.target.value);\nsetValues(_objectSpread({},values,_defineProperty({error:false},name,event.target.value)));};};var clickSubmit=function clickSubmit(event){event.preventDefault();updateUser(match.params.userId,token,{name:name,email:email,password:password}).then(function(data){if(data.error){alert(data.error);}else{updateUserLocalStorage(data,function(){setValues(_objectSpread({},values,{name:data.name,email:data.email,success:true}));});}});};var showSuccess=function showSuccess(success){return React.createElement(\"div\",{className:\"alert alert-info\",style:{display:success?'':'none'}},\"Your profile has been updated successfully!\");};var showError=function showError(error){return React.createElement(\"div\",{className:\"alert alert-danger\",style:{display:error?'':'none'}},\"Fail to update your profile\");};var updateForm=function updateForm(){return React.createElement(\"form\",null,React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Name\"),React.createElement(\"input\",{onChange:handleChange('name'),value:name,type:\"text\",className:\"form-control\"})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Email\"),React.createElement(\"input\",{defaultValue:email,type:\"email\",className:\"form-control\",disabled:true})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Password\"),React.createElement(\"input\",{onChange:handleChange('password'),value:password,type:\"password\",className:\"form-control\"})),React.createElement(\"div\",null,React.createElement(\"button\",{className:\"btn btn-primary float-right\",onClick:clickSubmit},\"Update\")));};return React.createElement(\"div\",{className:\"container w-50\"},React.createElement(\"h1\",{className:\"title m-3 text-center\"},\"Profile update\"),showSuccess(success),showError(error),updateForm());};export default Profile;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Nouveau dossier (2)/ECommerce-MERN/client/src/components/UserDashboard/Profile.js"],"names":["React","useState","useEffect","isAuthenticated","getUser","updateUser","updateUserLocalStorage","Profile","match","name","email","password","error","success","values","setValues","token","params","userId","then","data","handleChange","event","target","value","clickSubmit","preventDefault","alert","showSuccess","display","showError","updateForm"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { isAuthenticated } from '../../helpers/authFetch';\nimport {\n  getUser,\n  updateUser,\n  updateUserLocalStorage\n} from '../../helpers/user';\n\nconst Profile = ({ match }) => {\n  const [values, setValues] = useState({\n    name: '',\n    email: '',\n    password: '',\n    error: '',\n    success: false\n  });\n\n  const { name, email, password, error, success } = values;\n  const { token } = isAuthenticated();\n  useEffect(() => {\n    getUser(match.params.userId, token).then(data => {\n      if (data.error) {\n        setValues({ ...values, error: true });\n      } else {\n        setValues({ ...values, name: data.name, email: data.email });\n      }\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  const handleChange = name => event => {\n    // console.log(event.target.value);\n    setValues({ ...values, error: false, [name]: event.target.value });\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    updateUser(match.params.userId, token, { name, email, password }).then(\n      data => {\n        if (data.error) {\n          alert(data.error);\n        } else {\n          updateUserLocalStorage(data, () => {\n            setValues({\n              ...values,\n              name: data.name,\n              email: data.email,\n              success: true\n            });\n          });\n        }\n      }\n    );\n  };\n\n  const showSuccess = success => (\n    <div\n      className=\"alert alert-info\"\n      style={{ display: success ? '' : 'none' }}\n    >\n      Your profile has been updated successfully!\n    </div>\n  );\n\n  const showError = error => (\n    <div\n      className=\"alert alert-danger\"\n      style={{ display: error ? '' : 'none' }}\n    >\n      Fail to update your profile\n    </div>\n  );\n\n  const updateForm = () => (\n    <form>\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Name</label>\n        <input\n          onChange={handleChange('name')}\n          value={name}\n          type=\"text\"\n          className=\"form-control\"\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Email</label>\n        <input\n          defaultValue={email}\n          type=\"email\"\n          className=\"form-control\"\n          disabled\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Password</label>\n        <input\n          onChange={handleChange('password')}\n          value={password}\n          type=\"password\"\n          className=\"form-control\"\n        />\n      </div>\n\n      <div>\n        <button className=\"btn btn-primary float-right\" onClick={clickSubmit}>\n          Update\n        </button>\n      </div>\n    </form>\n  );\n\n  return (\n    <div className=\"container w-50\">\n      <h1 className=\"title m-3 text-center\">Profile update</h1>\n      {showSuccess(success)}\n      {showError(error)}\n      {updateForm()}\n    </div>\n  );\n};\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}