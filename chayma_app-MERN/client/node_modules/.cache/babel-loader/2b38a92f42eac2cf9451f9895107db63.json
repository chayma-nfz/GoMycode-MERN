{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\src\\\\components\\\\Search\\\\Search.js\";\nimport React, { useState, useEffect } from 'react';\nimport { getCategories } from '../../helpers/adminFetch';\nimport { getProductsBySearch } from '../../helpers/userFetch';\nimport Card from '../Home/Card';\n\nconst Search = () => {\n  const [data, setData] = useState({\n    categories: [],\n    category: '',\n    search: '',\n    results: [],\n    searched: false\n  });\n  const {\n    categories,\n    category,\n    search,\n    results,\n    searched\n  } = data;\n  useEffect(() => {\n    getCategories().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setData({ ...data,\n          categories: data\n        });\n      }\n    }); // eslint-disable-next-line\n  }, []);\n\n  const handleChange = name => event => {\n    setData({ ...data,\n      [name]: event.target.value\n    });\n  };\n\n  const searchSubmit = event => {\n    event.preventDefault();\n    console.log(`search:${search}`, `category:${category}`);\n\n    if (search) {\n      getProductsBySearch({\n        search: search || undefined,\n        category: category\n      }).then(response => {\n        if (response.error) {\n          console.log(response.error);\n        } else {\n          setData({ ...data,\n            results: response,\n            searched: true\n          });\n        }\n      });\n    }\n  }; // console.log(results);\n\n\n  const searchMessage = (searched, results) => {\n    if (searched && results.length > 0) {\n      return `Found ${results.length} products.`;\n    }\n\n    if (searched && results.length < 1) {\n      return `No product found!`;\n    }\n  };\n\n  const searchedProducts = (results = []) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt-3 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"mt-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, searchMessage(searched, results)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row card-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }, results.map((product, i) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4 mb-3\",\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      product: product,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 15\n      }\n    })))));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: searchSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group input-group-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"btn mr-2\",\n    onChange: handleChange('category'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"All\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, \"All\"), categories.map((c, i) => /*#__PURE__*/React.createElement(\"option\", {\n    key: i,\n    value: c._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 19\n    }\n  }, c.name)))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"search\",\n    className: \"form-control\",\n    onChange: handleChange('search'),\n    placeholder: \"Enter name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn input-group-append\",\n    style: {\n      border: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, \"Search\")))), searchedProducts(results));\n};\n\nexport default Search;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Nouveau dossier (2)/ECommerce-MERN/client/src/components/Search/Search.js"],"names":["React","useState","useEffect","getCategories","getProductsBySearch","Card","Search","data","setData","categories","category","search","results","searched","then","error","console","log","handleChange","name","event","target","value","searchSubmit","preventDefault","undefined","response","searchMessage","length","searchedProducts","map","product","i","c","_id","border"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,SAASC,mBAAT,QAAoC,yBAApC;AACA,OAAOC,IAAP,MAAiB,cAAjB;;AAEA,MAAMC,MAAM,GAAG,MAAM;AACnB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBP,QAAQ,CAAC;AAC/BQ,IAAAA,UAAU,EAAE,EADmB;AAE/BC,IAAAA,QAAQ,EAAE,EAFqB;AAG/BC,IAAAA,MAAM,EAAE,EAHuB;AAI/BC,IAAAA,OAAO,EAAE,EAJsB;AAK/BC,IAAAA,QAAQ,EAAE;AALqB,GAAD,CAAhC;AAQA,QAAM;AAAEJ,IAAAA,UAAF;AAAcC,IAAAA,QAAd;AAAwBC,IAAAA,MAAxB;AAAgCC,IAAAA,OAAhC;AAAyCC,IAAAA;AAAzC,MAAsDN,IAA5D;AAEAL,EAAAA,SAAS,CAAC,MAAM;AACdC,IAAAA,aAAa,GAAGW,IAAhB,CAAqBP,IAAI,IAAI;AAC3B,UAAIA,IAAI,CAACQ,KAAT,EAAgB;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYV,IAAI,CAACQ,KAAjB;AACD,OAFD,MAEO;AACLP,QAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAWE,UAAAA,UAAU,EAAEF;AAAvB,SAAD,CAAP;AACD;AACF,KAND,EADc,CAQd;AACD,GATQ,EASN,EATM,CAAT;;AAWA,QAAMW,YAAY,GAAGC,IAAI,IAAIC,KAAK,IAAI;AACpCZ,IAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAW,OAACY,IAAD,GAAQC,KAAK,CAACC,MAAN,CAAaC;AAAhC,KAAD,CAAP;AACD,GAFD;;AAIA,QAAMC,YAAY,GAAGH,KAAK,IAAI;AAC5BA,IAAAA,KAAK,CAACI,cAAN;AACAR,IAAAA,OAAO,CAACC,GAAR,CAAa,UAASN,MAAO,EAA7B,EAAiC,YAAWD,QAAS,EAArD;;AACA,QAAIC,MAAJ,EAAY;AACVP,MAAAA,mBAAmB,CAAC;AAClBO,QAAAA,MAAM,EAAEA,MAAM,IAAIc,SADA;AAElBf,QAAAA,QAAQ,EAAEA;AAFQ,OAAD,CAAnB,CAGGI,IAHH,CAGQY,QAAQ,IAAI;AAClB,YAAIA,QAAQ,CAACX,KAAb,EAAoB;AAClBC,UAAAA,OAAO,CAACC,GAAR,CAAYS,QAAQ,CAACX,KAArB;AACD,SAFD,MAEO;AACLP,UAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAWK,YAAAA,OAAO,EAAEc,QAApB;AAA8Bb,YAAAA,QAAQ,EAAE;AAAxC,WAAD,CAAP;AACD;AACF,OATD;AAUD;AACF,GAfD,CA1BmB,CA2CnB;;;AAEA,QAAMc,aAAa,GAAG,CAACd,QAAD,EAAWD,OAAX,KAAuB;AAC3C,QAAIC,QAAQ,IAAID,OAAO,CAACgB,MAAR,GAAiB,CAAjC,EAAoC;AAClC,aAAQ,SAAQhB,OAAO,CAACgB,MAAO,YAA/B;AACD;;AACD,QAAIf,QAAQ,IAAID,OAAO,CAACgB,MAAR,GAAiB,CAAjC,EAAoC;AAClC,aAAQ,mBAAR;AACD;AACF,GAPD;;AASA,QAAMC,gBAAgB,GAAG,CAACjB,OAAO,GAAG,EAAX,KAAkB;AACzC,wBACE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA2Be,aAAa,CAACd,QAAD,EAAWD,OAAX,CAAxC,CADF,eAEE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGA,OAAO,CAACkB,GAAR,CAAY,CAACC,OAAD,EAAUC,CAAV,kBACX;AAAK,MAAA,SAAS,EAAC,YAAf;AAA4B,MAAA,GAAG,EAAEA,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AAAM,MAAA,OAAO,EAAED,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADD,CADH,CAFF,CADF;AAYD,GAbD;;AAeA,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAM,IAAA,QAAQ,EAAER,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,SAAS,EAAC,UAAlB;AAA6B,IAAA,QAAQ,EAAEL,YAAY,CAAC,UAAD,CAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,KAAK,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,EAEGT,UAAU,CAACqB,GAAX,CAAe,CAACG,CAAD,EAAID,CAAJ,kBACd;AAAQ,IAAA,GAAG,EAAEA,CAAb;AAAgB,IAAA,KAAK,EAAEC,CAAC,CAACC,GAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,CAAC,CAACd,IADL,CADD,CAFH,CADF,CADF,eAYE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAC,cAFZ;AAGE,IAAA,QAAQ,EAAED,YAAY,CAAC,QAAD,CAHxB;AAIE,IAAA,WAAW,EAAC,YAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZF,CADF,eAoBE;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAwC,IAAA,KAAK,EAAE;AAAEiB,MAAAA,MAAM,EAAE;AAAV,KAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,SAAS,EAAC,iBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CApBF,CADF,CAFF,EA6BGN,gBAAgB,CAACjB,OAAD,CA7BnB,CADF;AAiCD,CAtGD;;AAwGA,eAAeN,MAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getCategories } from '../../helpers/adminFetch';\nimport { getProductsBySearch } from '../../helpers/userFetch';\nimport Card from '../Home/Card';\n\nconst Search = () => {\n  const [data, setData] = useState({\n    categories: [],\n    category: '',\n    search: '',\n    results: [],\n    searched: false\n  });\n\n  const { categories, category, search, results, searched } = data;\n\n  useEffect(() => {\n    getCategories().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setData({ ...data, categories: data });\n      }\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  const handleChange = name => event => {\n    setData({ ...data, [name]: event.target.value });\n  };\n\n  const searchSubmit = event => {\n    event.preventDefault();\n    console.log(`search:${search}`, `category:${category}`);\n    if (search) {\n      getProductsBySearch({\n        search: search || undefined,\n        category: category\n      }).then(response => {\n        if (response.error) {\n          console.log(response.error);\n        } else {\n          setData({ ...data, results: response, searched: true });\n        }\n      });\n    }\n  };\n\n  // console.log(results);\n\n  const searchMessage = (searched, results) => {\n    if (searched && results.length > 0) {\n      return `Found ${results.length} products.`;\n    }\n    if (searched && results.length < 1) {\n      return `No product found!`;\n    }\n  };\n\n  const searchedProducts = (results = []) => {\n    return (\n      <div className=\"mt-3 text-center\">\n        <h2 className=\"mt-3 mb-3\">{searchMessage(searched, results)}</h2>\n        <div className=\"row card-container\">\n          {results.map((product, i) => (\n            <div className=\"col-4 mb-3\" key={i}>\n              <Card product={product} />\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"m-3\">\n      {/* Search Form */}\n      <form onSubmit={searchSubmit}>\n        <span className=\"input-group-text\">\n          <div className=\"input-group input-group-lg\">\n            <div className=\"input-group-prepend\">\n              <select className=\"btn mr-2\" onChange={handleChange('category')}>\n                <option value=\"All\">All</option>\n                {categories.map((c, i) => (\n                  <option key={i} value={c._id}>\n                    {c.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <input\n              type=\"search\"\n              className=\"form-control\"\n              onChange={handleChange('search')}\n              placeholder=\"Enter name\"\n            />\n          </div>\n          <div className=\"btn input-group-append\" style={{ border: 'none' }}>\n            <button className=\"btn btn-primary\">Search</button>\n          </div>\n        </span>\n      </form>\n      {/* Search  Results*/}\n      {searchedProducts(results)}\n    </div>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}