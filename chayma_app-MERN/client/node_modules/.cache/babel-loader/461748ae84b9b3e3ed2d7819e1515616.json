{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\src\\\\components\\\\AdminDashboard\\\\CreateProduct.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { createProduct, getCategories } from '../../helpers/adminFetch';\nimport { isAuthenticated } from '../../helpers/authFetch';\n\nconst CreateProduct = () => {\n  const _useState = useState({\n    name: '',\n    description: '',\n    price: '',\n    categories: [],\n    category: '',\n    shipping: '',\n    quantity: '',\n    photo: '',\n    loading: false,\n    error: '',\n    createdProduct: '',\n    formData: ''\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        values = _useState2[0],\n        setValues = _useState2[1];\n\n  const _isAuthenticated = isAuthenticated(),\n        user = _isAuthenticated.user,\n        token = _isAuthenticated.token;\n\n  const name = values.name,\n        description = values.description,\n        price = values.price,\n        categories = values.categories,\n        quantity = values.quantity,\n        loading = values.loading,\n        error = values.error,\n        createdProduct = values.createdProduct,\n        formData = values.formData; // load categories and set form data\n\n  const init = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        setValues(_objectSpread({}, values, {\n          categories: data,\n          formData: new FormData()\n        }));\n      }\n    });\n  };\n\n  useEffect(() => {\n    init(); // eslint-disable-next-line\n  }, []);\n\n  const handleChange = name => event => {\n    const value = name === 'photo' ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues(_objectSpread({}, values, {\n      [name]: value\n    }));\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues(_objectSpread({}, values, {\n      error: '',\n      loading: true\n    }));\n    createProduct(user._id, token, formData).then(data => {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        setValues(_objectSpread({}, values, {\n          name: '',\n          description: '',\n          photo: '',\n          price: '',\n          quantity: '',\n          loading: false,\n          createdProduct: data.name\n        }));\n      }\n    });\n  };\n\n  const newPostForm = () => React.createElement(\"form\", {\n    className: \"mb-3\",\n    onSubmit: clickSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Post Photo\"), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"btn btn-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onChange: handleChange('photo'),\n    type: \"file\",\n    name: \"photo\",\n    accept: \"image/*\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"Name\"), React.createElement(\"input\", {\n    onChange: handleChange('name'),\n    type: \"text\",\n    className: \"form-control\",\n    value: name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Description\"), React.createElement(\"textarea\", {\n    onChange: handleChange('description'),\n    className: \"form-control\",\n    value: description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"Price\"), React.createElement(\"input\", {\n    onChange: handleChange('price'),\n    type: \"number\",\n    className: \"form-control\",\n    value: price,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, \"Category\"), React.createElement(\"select\", {\n    onChange: handleChange('category'),\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Please select\"), categories && categories.map((c, i) => React.createElement(\"option\", {\n    key: i,\n    value: c._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, c.name)))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, \"Shipping\"), React.createElement(\"select\", {\n    onChange: handleChange('shipping'),\n    className: \"form-control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"Please select\"), React.createElement(\"option\", {\n    value: \"0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, \"No\"), React.createElement(\"option\", {\n    value: \"1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \"Yes\"))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, \"Quantity\"), React.createElement(\"input\", {\n    onChange: handleChange('quantity'),\n    type: \"number\",\n    className: \"form-control\",\n    value: quantity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  })), React.createElement(Link, {\n    to: \"/admin/dashboard\",\n    className: \"btn btn-outline-warning float-left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, \"Back\"), React.createElement(\"button\", {\n    className: \"btn btn-outline-primary float-right mb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, \"Create\"));\n\n  const showError = () => React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    style: {\n      display: error ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, error);\n\n  const showSuccess = () => React.createElement(\"div\", {\n    className: \"alert alert-info\",\n    style: {\n      display: createdProduct ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, `${createdProduct}`, \" is created!\"));\n\n  const showLoading = () => loading && React.createElement(\"div\", {\n    className: \"d-flex justify-content-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"spinner-border\",\n    role: \"status\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"sr-only\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, \"Loading...\")));\n\n  return React.createElement(\"div\", {\n    className: \"container w-50\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"title p-2 text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, \"New Product\"), showLoading(), showSuccess(), showError(), newPostForm());\n};\n\nexport default CreateProduct;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Nouveau dossier (2)/ECommerce-MERN/client/src/components/AdminDashboard/CreateProduct.js"],"names":["React","useState","useEffect","Link","createProduct","getCategories","isAuthenticated","CreateProduct","name","description","price","categories","category","shipping","quantity","photo","loading","error","createdProduct","formData","values","setValues","user","token","init","then","data","FormData","handleChange","event","value","target","files","set","clickSubmit","preventDefault","_id","newPostForm","map","c","i","showError","display","showSuccess","showLoading"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { createProduct, getCategories } from '../../helpers/adminFetch';\nimport { isAuthenticated } from '../../helpers/authFetch';\n\nconst CreateProduct = () => {\n  const [values, setValues] = useState({\n    name: '',\n    description: '',\n    price: '',\n    categories: [],\n    category: '',\n    shipping: '',\n    quantity: '',\n    photo: '',\n    loading: false,\n    error: '',\n    createdProduct: '',\n\n    formData: ''\n  });\n\n  const { user, token } = isAuthenticated();\n  const {\n    name,\n    description,\n    price,\n    categories,\n    quantity,\n    loading,\n    error,\n    createdProduct,\n    formData\n  } = values;\n\n  // load categories and set form data\n  const init = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setValues({\n          ...values,\n          categories: data,\n          formData: new FormData()\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    init();\n    // eslint-disable-next-line\n  }, []);\n\n  const handleChange = name => event => {\n    const value = name === 'photo' ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues({ ...values, [name]: value });\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values, error: '', loading: true });\n\n    createProduct(user._id, token, formData).then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setValues({\n          ...values,\n          name: '',\n          description: '',\n          photo: '',\n          price: '',\n          quantity: '',\n          loading: false,\n          createdProduct: data.name\n        });\n      }\n    });\n  };\n\n  const newPostForm = () => (\n    <form className=\"mb-3\" onSubmit={clickSubmit}>\n      <h4>Post Photo</h4>\n      <div className=\"form-group\">\n        <label className=\"btn btn-secondary\">\n          <input\n            onChange={handleChange('photo')}\n            type=\"file\"\n            name=\"photo\"\n            accept=\"image/*\"\n          />\n        </label>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Name</label>\n        <input\n          onChange={handleChange('name')}\n          type=\"text\"\n          className=\"form-control\"\n          value={name}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Description</label>\n        <textarea\n          onChange={handleChange('description')}\n          className=\"form-control\"\n          value={description}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Price</label>\n        <input\n          onChange={handleChange('price')}\n          type=\"number\"\n          className=\"form-control\"\n          value={price}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Category</label>\n        <select onChange={handleChange('category')} className=\"form-control\">\n          <option>Please select</option>\n          {categories &&\n            categories.map((c, i) => (\n              <option key={i} value={c._id}>\n                {c.name}\n              </option>\n            ))}\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Shipping</label>\n        <select onChange={handleChange('shipping')} className=\"form-control\">\n          <option>Please select</option>\n          <option value=\"0\">No</option>\n          <option value=\"1\">Yes</option>\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Quantity</label>\n        <input\n          onChange={handleChange('quantity')}\n          type=\"number\"\n          className=\"form-control\"\n          value={quantity}\n        />\n      </div>\n\n      <Link\n        to=\"/admin/dashboard\"\n        className=\"btn btn-outline-warning float-left\"\n      >\n        Back\n      </Link>\n      <button className=\"btn btn-outline-primary float-right mb-3\">\n        Create\n      </button>\n    </form>\n  );\n\n  const showError = () => (\n    <div\n      className=\"alert alert-danger\"\n      style={{ display: error ? '' : 'none' }}\n    >\n      {error}\n    </div>\n  );\n\n  const showSuccess = () => (\n    <div\n      className=\"alert alert-info\"\n      style={{ display: createdProduct ? '' : 'none' }}\n    >\n      <h2>{`${createdProduct}`} is created!</h2>\n    </div>\n  );\n\n  const showLoading = () =>\n    loading && (\n      <div className=\"d-flex justify-content-center\">\n        <div className=\"spinner-border\" role=\"status\">\n          <span className=\"sr-only\">Loading...</span>\n        </div>\n      </div>\n    );\n\n  return (\n    <div className=\"container w-50\">\n      <h1 className=\"title p-2 text-center\">New Product</h1>\n      {showLoading()}\n      {showSuccess()}\n      {showError()}\n      {newPostForm()}\n    </div>\n  );\n};\n\nexport default CreateProduct;\n"]},"metadata":{},"sourceType":"module"}