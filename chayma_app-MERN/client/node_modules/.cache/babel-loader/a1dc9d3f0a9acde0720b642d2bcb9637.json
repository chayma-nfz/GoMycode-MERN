{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{createProduct,getCategories}from'../../helpers/adminFetch';import{isAuthenticated}from'../../helpers/authFetch';var CreateProduct=function CreateProduct(){var _useState=useState({name:'',description:'',price:'',categories:[],category:'',shipping:'',quantity:'',photo:'',loading:false,error:'',createdProduct:'',formData:''}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var name=values.name,description=values.description,price=values.price,categories=values.categories,quantity=values.quantity,loading=values.loading,error=values.error,createdProduct=values.createdProduct,formData=values.formData;// load categories and set form data\nvar init=function init(){getCategories().then(function(data){if(data.error){setValues(_objectSpread({},values,{error:data.error}));}else{setValues(_objectSpread({},values,{categories:data,formData:new FormData()}));}});};useEffect(function(){init();// eslint-disable-next-line\n},[]);var handleChange=function handleChange(name){return function(event){var value=name==='photo'?event.target.files[0]:event.target.value;formData.set(name,value);setValues(_objectSpread({},values,_defineProperty({},name,value)));};};var clickSubmit=function clickSubmit(event){event.preventDefault();setValues(_objectSpread({},values,{error:'',loading:true}));createProduct(user._id,token,formData).then(function(data){if(data.error){setValues(_objectSpread({},values,{error:data.error}));}else{setValues(_objectSpread({},values,{name:'',description:'',photo:'',price:'',quantity:'',loading:false,createdProduct:data.name}));}});};var newPostForm=function newPostForm(){return React.createElement(\"form\",{className:\"mb-3\",onSubmit:clickSubmit},React.createElement(\"h4\",null,\"Post Photo\"),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"btn btn-secondary\"},React.createElement(\"input\",{onChange:handleChange('photo'),type:\"file\",name:\"photo\",accept:\"image/*\"}))),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Name\"),React.createElement(\"input\",{onChange:handleChange('name'),type:\"text\",className:\"form-control\",value:name})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Description\"),React.createElement(\"textarea\",{onChange:handleChange('description'),className:\"form-control\",value:description})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Price\"),React.createElement(\"input\",{onChange:handleChange('price'),type:\"number\",className:\"form-control\",value:price})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Category\"),React.createElement(\"select\",{onChange:handleChange('category'),className:\"form-control\"},React.createElement(\"option\",null,\"Please select\"),categories&&categories.map(function(c,i){return React.createElement(\"option\",{key:i,value:c._id},c.name);}))),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Shipping\"),React.createElement(\"select\",{onChange:handleChange('shipping'),className:\"form-control\"},React.createElement(\"option\",null,\"Please select\"),React.createElement(\"option\",{value:\"0\"},\"No\"),React.createElement(\"option\",{value:\"1\"},\"Yes\"))),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"text-muted\"},\"Quantity\"),React.createElement(\"input\",{onChange:handleChange('quantity'),type:\"number\",className:\"form-control\",value:quantity})),React.createElement(Link,{to:\"/admin/dashboard\",className:\"btn btn-outline-warning float-left\"},\"Back\"),React.createElement(\"button\",{className:\"btn btn-outline-primary float-right mb-3\"},\"Create\"));};var showError=function showError(){return React.createElement(\"div\",{className:\"alert alert-danger\",style:{display:error?'':'none'}},error);};var showSuccess=function showSuccess(){return React.createElement(\"div\",{className:\"alert alert-info\",style:{display:createdProduct?'':'none'}},React.createElement(\"h2\",null,\"\".concat(createdProduct),\" is created!\"));};var showLoading=function showLoading(){return loading&&React.createElement(\"div\",{className:\"d-flex justify-content-center\"},React.createElement(\"div\",{className:\"spinner-border\",role:\"status\"},React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\")));};return React.createElement(\"div\",{className:\"container w-50\"},React.createElement(\"h1\",{className:\"title p-2 text-center\"},\"New Product\"),showLoading(),showSuccess(),showError(),newPostForm());};export default CreateProduct;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Nouveau dossier (2)/ECommerce-MERN/client/src/components/AdminDashboard/CreateProduct.js"],"names":["React","useState","useEffect","Link","createProduct","getCategories","isAuthenticated","CreateProduct","name","description","price","categories","category","shipping","quantity","photo","loading","error","createdProduct","formData","values","setValues","user","token","init","then","data","FormData","handleChange","event","value","target","files","set","clickSubmit","preventDefault","_id","newPostForm","map","c","i","showError","display","showSuccess","showLoading"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { createProduct, getCategories } from '../../helpers/adminFetch';\nimport { isAuthenticated } from '../../helpers/authFetch';\n\nconst CreateProduct = () => {\n  const [values, setValues] = useState({\n    name: '',\n    description: '',\n    price: '',\n    categories: [],\n    category: '',\n    shipping: '',\n    quantity: '',\n    photo: '',\n    loading: false,\n    error: '',\n    createdProduct: '',\n\n    formData: ''\n  });\n\n  const { user, token } = isAuthenticated();\n  const {\n    name,\n    description,\n    price,\n    categories,\n    quantity,\n    loading,\n    error,\n    createdProduct,\n    formData\n  } = values;\n\n  // load categories and set form data\n  const init = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setValues({\n          ...values,\n          categories: data,\n          formData: new FormData()\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    init();\n    // eslint-disable-next-line\n  }, []);\n\n  const handleChange = name => event => {\n    const value = name === 'photo' ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues({ ...values, [name]: value });\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values, error: '', loading: true });\n\n    createProduct(user._id, token, formData).then(data => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setValues({\n          ...values,\n          name: '',\n          description: '',\n          photo: '',\n          price: '',\n          quantity: '',\n          loading: false,\n          createdProduct: data.name\n        });\n      }\n    });\n  };\n\n  const newPostForm = () => (\n    <form className=\"mb-3\" onSubmit={clickSubmit}>\n      <h4>Post Photo</h4>\n      <div className=\"form-group\">\n        <label className=\"btn btn-secondary\">\n          <input\n            onChange={handleChange('photo')}\n            type=\"file\"\n            name=\"photo\"\n            accept=\"image/*\"\n          />\n        </label>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Name</label>\n        <input\n          onChange={handleChange('name')}\n          type=\"text\"\n          className=\"form-control\"\n          value={name}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Description</label>\n        <textarea\n          onChange={handleChange('description')}\n          className=\"form-control\"\n          value={description}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Price</label>\n        <input\n          onChange={handleChange('price')}\n          type=\"number\"\n          className=\"form-control\"\n          value={price}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Category</label>\n        <select onChange={handleChange('category')} className=\"form-control\">\n          <option>Please select</option>\n          {categories &&\n            categories.map((c, i) => (\n              <option key={i} value={c._id}>\n                {c.name}\n              </option>\n            ))}\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Shipping</label>\n        <select onChange={handleChange('shipping')} className=\"form-control\">\n          <option>Please select</option>\n          <option value=\"0\">No</option>\n          <option value=\"1\">Yes</option>\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Quantity</label>\n        <input\n          onChange={handleChange('quantity')}\n          type=\"number\"\n          className=\"form-control\"\n          value={quantity}\n        />\n      </div>\n\n      <Link\n        to=\"/admin/dashboard\"\n        className=\"btn btn-outline-warning float-left\"\n      >\n        Back\n      </Link>\n      <button className=\"btn btn-outline-primary float-right mb-3\">\n        Create\n      </button>\n    </form>\n  );\n\n  const showError = () => (\n    <div\n      className=\"alert alert-danger\"\n      style={{ display: error ? '' : 'none' }}\n    >\n      {error}\n    </div>\n  );\n\n  const showSuccess = () => (\n    <div\n      className=\"alert alert-info\"\n      style={{ display: createdProduct ? '' : 'none' }}\n    >\n      <h2>{`${createdProduct}`} is created!</h2>\n    </div>\n  );\n\n  const showLoading = () =>\n    loading && (\n      <div className=\"d-flex justify-content-center\">\n        <div className=\"spinner-border\" role=\"status\">\n          <span className=\"sr-only\">Loading...</span>\n        </div>\n      </div>\n    );\n\n  return (\n    <div className=\"container w-50\">\n      <h1 className=\"title p-2 text-center\">New Product</h1>\n      {showLoading()}\n      {showSuccess()}\n      {showError()}\n      {newPostForm()}\n    </div>\n  );\n};\n\nexport default CreateProduct;\n"]},"metadata":{},"sourceType":"module"}