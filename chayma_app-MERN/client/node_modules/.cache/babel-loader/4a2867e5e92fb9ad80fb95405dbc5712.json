{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\src\\\\components\\\\AdminDashboard\\\\Order.js\";\nimport React, { useState, useEffect } from 'react';\nimport moment from 'moment';\nimport { getOrders, getStatusValues, updateOrderStatus } from '../../helpers/adminFetch';\nimport { isAuthenticated } from '../../helpers/authFetch';\n\nconst Orders = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        orders = _useState2[0],\n        setOrders = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        statusValues = _useState4[0],\n        setStatusValues = _useState4[1];\n\n  const _isAuthenticated = isAuthenticated(),\n        user = _isAuthenticated.user,\n        token = _isAuthenticated.token;\n\n  const loadOrders = () => {\n    getOrders(user._id, token).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        // console.log(data);\n        setOrders(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    //Get all orders\n    loadOrders(); //Get order's status\n\n    getStatusValues(user._id, token).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        // console.log(data);\n        setStatusValues(data);\n      }\n    }); // eslint-disable-next-line\n  }, []);\n\n  const showInput = (key, value) => React.createElement(\"div\", {\n    className: \"input-group mb-2 mr-sm-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, key)), React.createElement(\"input\", {\n    type: \"text\",\n    value: value,\n    className: \"form-control\",\n    readOnly: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }));\n\n  const handleStatusChange = (e, orderId) => {\n    updateOrderStatus(user._id, token, orderId, e.target.value).then(res => {\n      if (res.error) {\n        console.log('Status update failed');\n      } else {\n        loadOrders();\n      }\n    });\n  };\n\n  const showStatus = order => React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    className: \"mark mb-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Status: \", order.status), React.createElement(\"select\", {\n    className: \"form-control\",\n    onChange: e => handleStatusChange(e, order._id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Update Status\"), statusValues.map((status, i) => React.createElement(\"option\", {\n    key: i,\n    value: status,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, status))));\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"text-center mt-2 title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"Total orders: \", orders.length), orders.map(o => {\n    return React.createElement(\"div\", {\n      className: \"row m-2\",\n      key: o._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"mb-3 text-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Order ID: \", o._id)), React.createElement(\"ul\", {\n      className: \"list-group mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"list-group-item text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, showStatus(o)), React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Transaction ID: \", o.transaction_id), React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Amount: $\", o.amount), React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Ordered by: \", o.user.name), React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Ordered on: \", moment(o.createdAt).fromNow()), React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Delivery address: \", o.address))), React.createElement(\"div\", {\n      className: \"col-6 m-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"mt-4 mb-4 font-italic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Total products in the order: \", o.products.length), o.products.map(p => React.createElement(\"div\", {\n      key: p._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, showInput('Name', p.name), showInput('Price', `$${p.price}`), showInput('Count', p.count), showInput('ID', p._id)))), React.createElement(\"hr\", {\n      style: {\n        borderBottom: '3px solid indigo',\n        width: '50%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }));\n  }));\n};\n\nexport default Orders;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Nouveau dossier (2)/ECommerce-MERN/client/src/components/AdminDashboard/Order.js"],"names":["React","useState","useEffect","moment","getOrders","getStatusValues","updateOrderStatus","isAuthenticated","Orders","orders","setOrders","statusValues","setStatusValues","user","token","loadOrders","_id","then","data","error","console","log","showInput","key","value","handleStatusChange","e","orderId","target","res","showStatus","order","status","map","i","length","o","transaction_id","amount","name","createdAt","fromNow","address","products","p","price","count","borderBottom","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport moment from 'moment';\nimport {\n  getOrders,\n  getStatusValues,\n  updateOrderStatus\n} from '../../helpers/adminFetch';\nimport { isAuthenticated } from '../../helpers/authFetch';\n\nconst Orders = () => {\n  const [orders, setOrders] = useState([]);\n  const [statusValues, setStatusValues] = useState([]);\n  const { user, token } = isAuthenticated();\n\n  const loadOrders = () => {\n    getOrders(user._id, token).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        // console.log(data);\n        setOrders(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    //Get all orders\n    loadOrders();\n\n    //Get order's status\n    getStatusValues(user._id, token).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        // console.log(data);\n        setStatusValues(data);\n      }\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  const showInput = (key, value) => (\n    <div className=\"input-group mb-2 mr-sm-2\">\n      <div className=\"input-group-prepend\">\n        <div className=\"input-group-text\">{key}</div>\n      </div>\n      <input type=\"text\" value={value} className=\"form-control\" readOnly />\n    </div>\n  );\n\n  const handleStatusChange = (e, orderId) => {\n    updateOrderStatus(user._id, token, orderId, e.target.value).then(res => {\n      if (res.error) {\n        console.log('Status update failed');\n      } else {\n        loadOrders();\n      }\n    });\n  };\n  const showStatus = order => (\n    <div className=\"form-group\">\n      <h4 className=\"mark mb-2\">Status: {order.status}</h4>\n      <select\n        className=\"form-control\"\n        onChange={e => handleStatusChange(e, order._id)}\n      >\n        <option>Update Status</option>\n        {statusValues.map((status, i) => (\n          <option key={i} value={status}>\n            {status}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n\n  return (\n    <div>\n      <h1 className=\"text-center mt-2 title\">Total orders: {orders.length}</h1>\n      {orders.map(o => {\n        return (\n          <div className=\"row m-2\" key={o._id}>\n            <div className=\"col-6\">\n              <h4 className=\"mb-3 text-primary\">\n                <span className=\"\">Order ID: {o._id}</span>\n              </h4>\n\n              <ul className=\"list-group mb-2\">\n                <li className=\"list-group-item text-danger\">{showStatus(o)}</li>\n                <li className=\"list-group-item\">\n                  Transaction ID: {o.transaction_id}\n                </li>\n                <li className=\"list-group-item\">Amount: ${o.amount}</li>\n                <li className=\"list-group-item\">Ordered by: {o.user.name}</li>\n                <li className=\"list-group-item\">\n                  Ordered on: {moment(o.createdAt).fromNow()}\n                </li>\n                <li className=\"list-group-item\">\n                  Delivery address: {o.address}\n                </li>\n              </ul>\n            </div>\n            <div className=\"col-6 m-auto\">\n              <h3 className=\"mt-4 mb-4 font-italic\">\n                Total products in the order: {o.products.length}\n              </h3>\n              {o.products.map(p => (\n                <div key={p._id}>\n                  {showInput('Name', p.name)}\n                  {showInput('Price', `$${p.price}`)}\n                  {showInput('Count', p.count)}\n                  {showInput('ID', p._id)}\n                </div>\n              ))}\n            </div>\n            <hr style={{ borderBottom: '3px solid indigo', width: '50%' }} />\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Orders;\n"]},"metadata":{},"sourceType":"module"}