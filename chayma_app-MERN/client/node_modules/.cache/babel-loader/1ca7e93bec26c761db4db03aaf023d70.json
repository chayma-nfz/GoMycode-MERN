{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Nouveau dossier (2)\\\\ECommerce-MERN\\\\client\\\\src\\\\components\\\\Search\\\\Search.js\";\nimport React, { useState, useEffect } from 'react';\nimport { getCategories } from '../../helpers/adminFetch';\nimport { getProductsBySearch } from '../../helpers/userFetch';\nimport Card from '../Home/Card';\n\nconst Search = () => {\n  const _useState = useState({\n    categories: [],\n    category: '',\n    search: '',\n    results: [],\n    searched: false\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1];\n\n  const categories = data.categories,\n        category = data.category,\n        search = data.search,\n        results = data.results,\n        searched = data.searched;\n  useEffect(() => {\n    getCategories().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setData(_objectSpread({}, data, {\n          categories: data\n        }));\n      }\n    }); // eslint-disable-next-line\n  }, []);\n\n  const handleChange = name => event => {\n    setData(_objectSpread({}, data, {\n      [name]: event.target.value\n    }));\n  };\n\n  const searchSubmit = event => {\n    event.preventDefault();\n    console.log(`search:${search}`, `category:${category}`);\n\n    if (search) {\n      getProductsBySearch({\n        search: search || undefined,\n        category: category\n      }).then(response => {\n        if (response.error) {\n          console.log(response.error);\n        } else {\n          setData(_objectSpread({}, data, {\n            results: response,\n            searched: true\n          }));\n        }\n      });\n    }\n  }; // console.log(results);\n\n\n  const searchMessage = (searched, results) => {\n    if (searched && results.length > 0) {\n      return `Found ${results.length} products.`;\n    }\n\n    if (searched && results.length < 1) {\n      return `No product found!`;\n    }\n  };\n\n  const searchedProducts = (results = []) => {\n    return React.createElement(\"div\", {\n      className: \"mt-3 text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"mt-3 mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, searchMessage(searched, results)), React.createElement(\"div\", {\n      className: \"row card-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, results.map((product, i) => React.createElement(\"div\", {\n      className: \"col-4 mb-3\",\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(Card, {\n      product: product,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    })))));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"m-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: searchSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group input-group-lg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    className: \"btn mr-2\",\n    onChange: handleChange('category'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"All\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"All\"), categories.map((c, i) => React.createElement(\"option\", {\n    key: i,\n    value: c._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, c.name)))), React.createElement(\"input\", {\n    type: \"search\",\n    className: \"form-control\",\n    onChange: handleChange('search'),\n    placeholder: \"Enter name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"btn input-group-append\",\n    style: {\n      border: 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Search\")))), searchedProducts(results));\n};\n\nexport default Search;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Nouveau dossier (2)/ECommerce-MERN/client/src/components/Search/Search.js"],"names":["React","useState","useEffect","getCategories","getProductsBySearch","Card","Search","categories","category","search","results","searched","data","setData","then","error","console","log","handleChange","name","event","target","value","searchSubmit","preventDefault","undefined","response","searchMessage","length","searchedProducts","map","product","i","c","_id","border"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getCategories } from '../../helpers/adminFetch';\nimport { getProductsBySearch } from '../../helpers/userFetch';\nimport Card from '../Home/Card';\n\nconst Search = () => {\n  const [data, setData] = useState({\n    categories: [],\n    category: '',\n    search: '',\n    results: [],\n    searched: false\n  });\n\n  const { categories, category, search, results, searched } = data;\n\n  useEffect(() => {\n    getCategories().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setData({ ...data, categories: data });\n      }\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  const handleChange = name => event => {\n    setData({ ...data, [name]: event.target.value });\n  };\n\n  const searchSubmit = event => {\n    event.preventDefault();\n    console.log(`search:${search}`, `category:${category}`);\n    if (search) {\n      getProductsBySearch({\n        search: search || undefined,\n        category: category\n      }).then(response => {\n        if (response.error) {\n          console.log(response.error);\n        } else {\n          setData({ ...data, results: response, searched: true });\n        }\n      });\n    }\n  };\n\n  // console.log(results);\n\n  const searchMessage = (searched, results) => {\n    if (searched && results.length > 0) {\n      return `Found ${results.length} products.`;\n    }\n    if (searched && results.length < 1) {\n      return `No product found!`;\n    }\n  };\n\n  const searchedProducts = (results = []) => {\n    return (\n      <div className=\"mt-3 text-center\">\n        <h2 className=\"mt-3 mb-3\">{searchMessage(searched, results)}</h2>\n        <div className=\"row card-container\">\n          {results.map((product, i) => (\n            <div className=\"col-4 mb-3\" key={i}>\n              <Card product={product} />\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"m-3\">\n      {/* Search Form */}\n      <form onSubmit={searchSubmit}>\n        <span className=\"input-group-text\">\n          <div className=\"input-group input-group-lg\">\n            <div className=\"input-group-prepend\">\n              <select className=\"btn mr-2\" onChange={handleChange('category')}>\n                <option value=\"All\">All</option>\n                {categories.map((c, i) => (\n                  <option key={i} value={c._id}>\n                    {c.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <input\n              type=\"search\"\n              className=\"form-control\"\n              onChange={handleChange('search')}\n              placeholder=\"Enter name\"\n            />\n          </div>\n          <div className=\"btn input-group-append\" style={{ border: 'none' }}>\n            <button className=\"btn btn-primary\">Search</button>\n          </div>\n        </span>\n      </form>\n      {/* Search  Results*/}\n      {searchedProducts(results)}\n    </div>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}